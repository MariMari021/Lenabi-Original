<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editora LeNabi</title>
    <link rel="stylesheet" href="style.css">

    <script src="https://kit.fontawesome.com/a2288264db.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="shortcut icon" href="img-interface/lenabi 1.png" type="image/x-icon">
    <link rel="stylesheet" href="produto.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="stylemobile.css">
    <style>
        
    </style>
</head>

<body>
    <header id="header">
        <div class="container-fundo">
            <div class="container">
                <a href="index.html">
                    <div class="logo">
                        <img src="img-interface/lenabi 1.png" alt="borboleta voando dentro de um livro">
                        <h2>LeNabi</h2>
                    </div>
                </a>
                <div class="buscar">
                    <input type="text" id="buscar" placeholder="Buscar livro" oninput="buscarProduto()">
                </div>

                <div id="favoritos" onclick="toggleFavoritos()">
                    <div class="imagem">
                        <i class="fa-regular fa-heart" style="color: #522318; "></i>
                    </div>
                    <span id="cont-favoritos">0</span>
                </div>
                <div id="carrinho-itens" style="display: none;">
                    <ul id="itens-lista"></ul>
                    <span id="preco-total">Valor Total: R$0,00</span>
                    <button class="car" onclick="limparCarrinho()">Limpar Carrinho</button>
                </div>
                <!-- Dentro da div do usuário logado -->
                <div class="usuario-logado" id="userHeader" onclick="mostrarOcultarPopup()">
                    <i class="fa-solid fa-user" style="color: #522318;"></i>
                    <span id="nomeUsuario"></span>
                </div>
                <div id="popup" style="display: none;">
                    <div class="popup-conteudo">
                        <img src="img-interface/Group 20.svg" alt="">
                        <span id="conteudoPopup"></span>
                        <span id="emailUsuario"></span>
                        <br>

                    </div>
                    <button class="botaoSair" onclick="logout()">
                        <p>Sair</p>
                        <i id="logoutButton" class="fa-solid fa-arrow-right-from-bracket"></i>
                    </button>
                </div>
                <a href="login.html" class="button" id="loginButton"><span>Fazer login</span></a>
                <div class="botaoMenu">
                    <button onclick="toggleMenu()" class="burger material-symbols-outlined">
                        menu
                    </button>
                </div>
            </div>
            <nav class="navbar">
                <div class="buscarMobile">
                    <input type="text" spellcheck="false" class="buscarMobile" id="buscarMobile"
                        placeholder="Buscar livro" oninput="buscarMobile()">
                </div>
                <nav>
                    <div class=" botoes-login">
                        <a href="index.html">Home</a>
                        <a href="produto.html#pre-venda">Pré-Venda</a>
                        <a href="produto.html#lancamentos-page">Lançamentos</a>
                        <a href="produto.html">Produtos</a>
                        <a href="sustentabilidade.html">Sustentabilidade</a>
                        <a onclick="toggleFav()" href="#">Favoritos</a>
                        <a href="sobre-nos.html">Sobre nós</a>
                        <a id="sideUser" href="login.html">Login</a>
                        <div class="logado-mobile" id="userHeaderMobile" onclick="toggleMobile()">
                            <i class="fa-solid fa-user" style="color: #522318;"></i>
                            <span id="userMobile"></span>
                        </div>
                    </div>
                </nav>
            </nav>
            <nav class="navbarUser">
                <nav>
                    <div id="popupMobile">
                        <div class="popupMobileAll">
                            <img src="img-interface/Group 20.svg" alt="">
                            <span id="conteudoMobile"></span>
                            <span id="emailMobile"></span>
                            <br>

                        </div>
                        <button class="botaoSairMobile" onclick="logout()">
                            <p>Sair</p>
                            <i id="logoutButtonMobile" class="fa-solid fa-arrow-right-from-bracket"></i>
                        </button>
                    </div>

                </nav>
            </nav>
            <nav class="navbarFav">
                <nav>
                    <div id="favMobile">
                        
                    </div>

                </nav>
            </nav>
        </div>


        </div>
        </div>

        <nav class="navDesktop">
            <div class="botoes">
                <a href="produto.html#pre-venda">Pré-Venda</a>
                <a href="produto.html#lancamentos-page">Lançamentos</a>
                <a href="produto.html">Produtos</a>
                <a href="sustentabilidade.html">Sustentabilidade</a>

            </div>
        </nav>
    </header>
    <main id="main">
        <section id="banner">
            <div class="app">

                <div class="cardList">
                    <button class="cardList__btn btn btn--left">
                        <div class="icon">
                            <svg>
                                <use xlink:href="#arrow-left"></use>
                            </svg>
                        </div>
                    </button>

                    <div class="cards__wrapper">

                        <div class="card current--card">
                            <div class="card__image">
                                <img src="img-interface/coração partido.webp" alt="" style="border-radius: 11px;" />
                            </div>

                        </div>
                        <div class="card next--card">
                            <div class="card__image">
                                <img src="img-interface/felizes para nunca.webp" alt="" style="border-radius: 11px;" />
                            </div>
                        </div>

                        <div class="card previous--card">
                            <div class="card__image">
                                <img src="img-interface/maldição do amor.webp" alt="" style="border-radius: 11px;" />
                            </div>
                        </div>
                    </div>

                    <button class="cardList__btn btn btn--right">
                        <div class="icon">
                            <svg>
                                <use xlink:href="#arrow-right"></use>
                            </svg>
                        </div>
                    </button>
                </div>

                <div class="infoList">
                    <div class="info__wrapper">
                        <div class="info current--info">
                            <h1 class="text name">Era Uma Vez <br>Um Coração Partido</h1>
                            <h4 class="text location">VOL . 1</h4>
                            <p class="text description">Literatura fantástica</p>
                        </div>

                        <div class="info next--info">
                            <h1 class="text name">A Balada Dos Felizes<br> Para Nunca</h1>
                            <h4 class="text location">VOL . 2</h4>
                            <p class="text description">Literatura fantástica</p>
                        </div>

                        <div class="info previous--info">
                            <h1 class="text name">A Maldição do Amor</h1>
                            <h4 class="text location">VOL . 3</h4>
                            <p class="text description">Literatura fantástica</p>
                        </div>
                    </div>
                </div>


                <div class="app__bg">
                    <div class="bg__image bg-current">
                        <img src="img-interface/coração partido.webp" alt="" />
                    </div>
                    <div class="bg__image bg-next">
                        <img src="img-interface/felizes para nunca.webp" alt="" />
                    </div>
                    <div class="bg__image bg-previous">
                        <img src="img-interface/maldição do amor.webp" alt="" />
                    </div>
                </div>
            </div>

            <svg class="icons" style="display: none;">
                <symbol id="arrow-left" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
                    <polyline points='328 112 184 256 328 400'
                        style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
                </symbol>
                <symbol id="arrow-right" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
                    <polyline points='184 112 328 256 184 400'
                        style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
                </symbol>
            </svg>
        </section>
        <section id="novidades">
            <div class="circulos">
                <div class="circuloUm"></div>
                <div class="circuloDois"></div>
            </div>

            <div class="novidade">
                <h1 id="novidadeMobile">Novidade!</h1>
            </div>

            <div class="divsaoUm"></div>
            <div class="divsaoDois"></div>

        </section>
        <section id="lancamentos">
            <div class="container-lancamento">
                <div id="slide">
                    <div class="item" id="img1" style="background-image: url(img-interface/hoje\ depois\ amanha.webp);">
                        <div class="content">
                            <div class="name">Hoje, depois, amanhã</div>
                            <div class="data">17/04/23</div>
                            <div class="des">Comédia romântica entre dois nerds no último dia do ensino médio. Descobrem
                                que podem não se odiar.
                                <br>
                                <a href="index14.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" id="img2" style="background-image: url(img-interface/irmaos\ Hawthorne.webp);">
                        <div class="content">
                            <div class="name">Os irmãos Hawthorne</div>
                            <div class="data">05/09/23</div>
                            <div class="des">Herdeiro bilionário ensinado a priorizar a família age para proteger
                                meias-irmãs sem se envolver emocionalmente.
                                <br>
                                <a href="index7.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" id="img3" style="background-image: url(img-interface/ventos\ uivantes.webp);">
                        <div class="content">
                            <div class="name">O morro dos ventos uivantes</div>
                            <div class="data">14/07/16</div>
                            <div class="des">Uma trágica história de amor e obsessão entre Catherine Earnshaw e seu
                                irmão adotivo, Heathcliff.
                                <br>
                                <a href="index15.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" id="img1" style="background-image: url(img-interface/hoje\ depois\ amanha.webp);">
                        <div class="content">
                            <div class="name">Hoje, depois, amanhã</div>
                            <div class="data">17/04/23</div>
                            <div class="des">Comédia romântica entre dois nerds no último dia do ensino médio. Descobrem
                                que podem não se odiar.
                                <br>
                                <a href="index14.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" id="img2" style="background-image: url(img-interface/irmaos\ Hawthorne.webp);">
                        <div class="content">
                            <div class="name">Os irmãos Hawthorne</div>
                            <div class="data">05/09/23</div>
                            <div class="des">Herdeiro bilionário ensinado a priorizar a família age para proteger
                                meias-irmãs sem se envolver emocionalmente.
                                <br>
                                <a href="index7.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" id="img3" style="background-image: url(img-interface/ventos\ uivantes.webp);">
                        <div class="content">
                            <div class="name">O morro dos ventos uivantes</div>
                            <div class="data">14/07/16</div>
                            <div class="des">Uma trágica história de amor e obsessão entre Catherine Earnshaw e seu
                                irmão adotivo, Heathcliff.
                                <br>
                                <a href="index15.html">Ver Mais</a>
                            </div>
                        </div>
                    </div>

                </div>
                <div id="but" class="buttons">
                    <button id="prev"><i class="fa-solid fa-angles-left"></i></i></button>
                    <button id="next"><i class="fa-solid fa-angles-right"></i></button>
                </div>
            </div>
            <div class="container-lancamento-mobile">
                <div id="slide-mobile">
                    <div class="item-mobile">
                        <div class="content-mobile">
                            <div class="name-mobile">Hoje, depois, amanhã</div>
                            <div class="data-mobile">17/04/23</div>
                            <div class="des-mobile">Comédia romântica entre dois nerds que descobrem que podem não se
                                odiar.
                                <br>
                            </div>
                            <a href="index14.html">Ver Mais</a>
                        </div>
                    </div>
                    <div class="item-mobile">
                        <div class="content-mobile">
                            <div class="name-mobile">Os irmãos Hawthorne</div>
                            <div class="data-mobile">05/09/23</div>
                            <div class="des-mobile">Herdeiro bilionário ensinado a priorizar a família age para proteger
                                meias-irmãs.
                                <br>
                            </div>
                            <a href="index7.html">Ver Mais</a>
                        </div>
                    </div>
                    <div class="item-mobile">
                        <div class="content-mobile">
                            <div class="name-mobile">O morro dos ventos uivantes</div>
                            <div class="data-mobile">14/07/16</div>
                            <div class="des-mobile">Trágica história de amor e obsessão entre Catherine Earnshaw e
                                Heathcliff.
                                <br>
                            </div>
                            <a href="index15.html">Ver Mais</a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="but-mobile" class="buttons-mobile">
                <button onclick="prevSlide()" class="next-mobile"><i class="fa-solid fa-angles-left"></i></button>
                <button onclick="nextSlide()" class="prev-mobile" id="proximo"><i
                        class="fa-solid fa-angles-right"></i></button>
            </div>
            </div>

        </section>
        <section id="Produtos">
            <div class="conteudo">
                <div class="tarja-tudo">
                    <div class="linha linha-um"></div>
                    <div class="tarja">
                        <p data-aos="fade-right" data-aos-duration="1800">Veja nossos<br><span>Produtos</span></p>
                    </div>
                    <div class="linha linha-dois"></div>
                </div>
                <div class="texto-img">
                    <div class="info-produtos">
                        <div class="texto">
                            <img src="img-interface/mdi_paper-outline.svg" alt="">
                            <div class="detalhes">
                                <h3>Folhas Recicladas</h3>
                                <p>Livros com folhas recicladas promovem uma leitura sustentável, reduzindo conservando
                                    recursos naturais. </p>
                            </div>
                            <div class="detalhes-mobile">
                                <p>Livros com folhas recicladas promovem uma leitura sustentável. </p>
                            </div>

                        </div>
                        <div class="texto">
                            <img src="img-interface/ion_library-outline.svg" alt="">
                            <div class="detalhes-library colecao">
                                <h3>Nossas Coleções</h3>
                                <p>Descubra as novas coleções de livros, com histórias envolventes, que cativarão
                                    leitores de todas as idades. </p>
                            </div>
                            <div class="library-mobile colecao-mobile">
                                <p>Descubra as novas coleções de livros, com histórias envolventes. </p>
                            </div>

                        </div>
                        <div class="texto">
                            <img src="img-interface/material-symbols_book-outline.svg" alt="">
                            <div class="detalhes">
                                <h3>Best-Sellers</h3>
                                <p>A LeNabi oferece livros de qualidade, como "Jogo Fatal", "A Cabana" e "O Ceifador",
                                    que cativam leitores os com reflexões profundas.</p>
                            </div>
                            <div class="detalhes-mobile">
                                <p>Livros de qualidade que cativam leitores com reflexões profundas.</p>
                            </div>
                        </div>
                        <div class="botao-linha">
                            <div class="linha-botao"></div>
                            <a href="produto.html">Ver mais</a>
                        </div>
                    </div>

                    <div class="scroll-img">
                        <div class="div1">
                            <a href=""><img src="img-interface/biblioteca meia noite.jpg" alt="" data-aos="fade-left"
                                    data-aos-duration="2000"></a>
                            <a href=""><img src="img-interface/a cabana.jpg" alt="" data-aos="fade-left"
                                    data-aos-duration="2000"></a>

                        </div>
                        <div class="div2">
                            <a href=""><img src="img-interface/daisy jones.jpg" alt="" data-aos="fade-left"
                                    data-aos-duration="2000"></a>

                            <a href=""><img src="img-interface/ladrao de raios.jpg" alt="" data-aos="fade-left"
                                    data-aos-duration="2000"></a>



                        </div>
                    </div>
                </div>
        </section>
        <section id="ScrollTrigger">

            <div class="divisoria"></div>


            <div class="area-parada">
                <div class="container-scroll">
                    <div class="trocas" id="trocas">
                        <div class="troca active">
                            <div class="sub">
                                <h1><span class="primeiro">Quer ficar por dentro das
                                        <h1 class="young">novidades?</h1>
                            </div>
                        </div>
                        <div class="troca">
                            <div class="sub">
                                <h1><span class="segundo">Participe do nosso
                                        <h1 class="young">NEWSLETTER</h1>
                            </div>
                        </div>
                        <div class="troca">
                            <div class="sub">
                                <h3><span class="terceiro">Receba as novidades
                                        <h1 class="young">na palma da mão.</h1>
                                        <form><input type="text" placeholder="Escreva aqui">
                                            <button type="submit">Enviar</button>
                                        </form>
                                    </span></h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="mobile-scroll">
                <div class="mobile-newslatter">
                    <h3><span class="terceiro-mobile">Receba as novidades
                            <h1 class="young-mobile">na palma da mão.</h1>
                            <form><input type="text-mobile" placeholder="Escreva aqui">
                                <button type="submit">Enviar</button>
                            </form>
                        </span></h3>
                </div>
            </div>

        </section>
        <section id="sustentabilidade">
            <div class="sustentabilidade">
                <div class="sustentavel-img">
                    <div class="circle">
                        <div class="circle-um"></div>
                        <div class="circle-dois"></div>
                    </div>
                    <img src="img-interface/unsplash_x8ZStukS2PM.png" alt="" class="mao-terra">
                    <img src="img-interface/papel.svg" alt="" class="papel">
                    <img src="img-interface/lenabi 1.png" alt="" class="logo-sustevel">
                    <h2>LeNabi</h2>
                </div>
                <div class="textoSustentavel">
                    <h1>conheça nosso projeto<br><span class="e">&</span><span> ajude o mundo!</span></h1>
                    <p>Através das palavras, contribuímos para um mundo melhor. Junte-se a nós nessa jornada literária e
                        sustentável e faça parte da nossa história em constante progresso.</p>
                    <a href="sustentabilidade.html"><button>Ver mais</button></a>
                </div>
            </div>
            <div class="sustentavelMobile">
                <img src="img-interface/sustentvelTeste.png" alt="">
                <div class="textoSustentavelMobile">
                    <h1>conheça nosso projeto<br><span class="e">&</span><span> ajude o mundo!</span></h1>
                    <p>Através das palavras, contribuímos para um mundo melhor. Junte-se a nós nessa jornada literária e
                        sustentável e faça parte da nossa história em constante progresso.</p>
                    <a href="sustentabilidade.html"><button>Ver mais</button></a>
                </div>

            </div>
            <div class="linhaSeparacao"></div>
        </section>
    </main>
    <footer id="footer">
        <div class="container-footer">
            <nav>
                <div class="parte1">
                    <a href="produto.html">Produtos</a>
                    <a href="produto.html#lancamentos-page" class="footer-desktop">Lançamentos</a>
                    <a href="produto.html#pre-venda" class="footer-desktop">Pré-venda</a>
                </div>
                <div class="parte2">
                    <a href="#" class="footer-desktop" id="favoritos-link">Favoritos</a>

                    <a href="sustentabilidade.html">Sustentabilidade</a>
                    <a href="sobre-nos.html">Sobre nós</a>
                </div>
            </nav>
            <div class="footer-branca"></div>
            <div class="redes-sociais">
                <a href="mailto:editoralenabi@gmail.com" target="_blank"><img class="email-footer"
                        src="img-interface/carbon_email.svg" alt=""></a>
                <a href="https://www.instagram.com/editoralenabi/?igshid=YTQwZjQ0NmI0OA%3D%3D" target="_blank"><img
                        class="insta-footer" src="img-interface/uil_instagram.svg" alt=""></a>
                <a href="https://x.com/LeNabiEditora?t=-ry8Op0ZSihvYuzXTeuZ8w&s=09" target="_blank"><img
                        class="x-footer" src="img-interface/simple-icons_x.svg" alt=""></a>
            </div>
            <div class="footer-branco"></div>
            <div class="logo-footer">
                <img src="img-interface/lenabi 1.png" alt="">
                <h2>LeNabi</h2>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src='https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.3/gsap.min.js'></script>
    <script src='https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="main.js"></script>

    <script>
        function buscarMobile() {
            const termoDeBusca = document.getElementById("buscarMobile").value.toLowerCase();
            const main = document.getElementById("main");
            main.innerHTML = ""; // Limpa o conteúdo atual

            // Realiza a busca nos elementos com a classe "livros" no arquivo "produto.html"
            fetch("produto.html")
                .then(response => response.text())
                .then(data => {
                    // Crie um elemento temporário para analisar o conteúdo do produto.html
                    const tempElement = document.createElement("div");
                    tempElement.innerHTML = data;

                    // Encontra os elementos com a classe "livros" e verifica se o título contém o termo de busca
                    const livros = tempElement.querySelectorAll(".livros");
                    livros.forEach(livro => {
                        const titulo = livro.querySelector("img").alt.toLowerCase();

                        if (titulo.includes(termoDeBusca)) {
                            main.appendChild(livro.cloneNode(true));
                        }
                    });

                    // Adicione a classe "area-de-busca" a main para aplicar os estilos
                    main.classList.add("area-de-busca");

                    // Verifique se há filhos na área de busca
                    if (main.children.length === 0) {
                        main.innerHTML = 'Nenhum resultado encontrado.';
                        main.style.display = "flex";
                        main.style.alignItems = "center";
                        main.style.backgroundColor = "#F8F1EE"; // Cor de fundo quando nenhum resultado é encontrado
                    }
                })
                .catch(error => {
                    console.error("Erro ao buscar produtos:", error);
                });
        }


        document.addEventListener('DOMContentLoaded', function () {
            renderizarCabecalho();
        });

        document.addEventListener('DOMContentLoaded', function () {
    renderizarCabecalho();
});

function renderizarCabecalho() {
    const headerLogin = document.getElementById("userHeader");
    const loginButton = document.getElementById("loginButton");
    const nomeUsuarioElement = document.getElementById("nomeUsuario");
    const popup = document.getElementById("popup");
    const conteudoPopup = document.getElementById("conteudoPopup");
    const emailUsuarioPopup = document.getElementById("emailUsuario");
    const userHeaderMobile = document.getElementById("userHeaderMobile");
    const sideUser = document.getElementById("sideUser");
    const nomeMobile = document.getElementById("userMobile");
    const conteudoMobile = document.getElementById("conteudoMobile");
    const emailMobile = document.getElementById("emailMobile");


    // Obtenha o nome e email do usuário armazenados no localStorage
    const nomeUsuario = localStorage.getItem('nomeUsuario');
    const emailUsuario = localStorage.getItem('emailUsuario');

    // Verifica se os elementos existem antes de manipulá-los
    if (headerLogin && loginButton && nomeUsuarioElement && popup && conteudoPopup && emailUsuarioPopup) {
        // Verifica a largura da tela
        console.log("Largura da tela:", window.innerWidth);
        if (window.innerWidth >= 975) {
            if (nomeUsuario) {
                // Usuário logado
                console.log("Usuário logado:", nomeUsuario);
                headerLogin.style.display = "flex";
                nomeUsuarioElement.textContent = nomeUsuario;  // Exibe o nome do usuário
                loginButton.style.display = "none";
            } else {
                // Usuário não logado
                console.log("Usuário não logado");
                headerLogin.style.display = "none";
                loginButton.style.display = "flex";
            }

            // Adiciona um evento de clique ao headerLogin
            headerLogin.addEventListener("click", function () {
                // Exibe o popup
                popup.style.display = "grid";

                // Preenche o conteúdo do popup com o nome e email do usuário
                conteudoPopup.textContent = nomeUsuario;
                emailUsuarioPopup.textContent = emailUsuario; // Adiciona o email do usuário ao popup
                console.log("Nome do usuário:", nomeUsuario);
                console.log("Email do usuário:", emailUsuario);
            });
        } if (window.innerWidth <= 975) {
            loginButton.style.display = "none";
            headerLogin.style.display = "none";
            userHeaderMobile.style.display = "none";
            popup.style.display = "none"
            if (nomeUsuario) {
                // Usuário logado
                console.log("Usuário logado:", nomeUsuario);
                userHeaderMobile.style.display = "flex";
                nomeMobile.textContent = nomeUsuario;  // Exibe o nome do usuário
                sideUser.style.display = "none";
                conteudoMobile.textContent = nomeUsuario;

                emailMobile.textContent = emailUsuario;

            } else {
                // Usuário não logado
                console.log("Usuário não logado");
                userHeaderMobile.style.display = "none";

                sideUser.style.display = "flex";
            }
        } else {
            console.error("A largura da tela é maior que 975 pixels.");
        }
    } else {
        console.error("Elemento não encontrado. Verifique os IDs no HTML.");
    }
}

// Chame a função para garantir que seja executada
renderizarCabecalho();



const toggleMenu = () => {
    // Fecha a openFav antes de abrir ou fechar o menu
    if (document.body.classList.contains("openFav")) {
        toggleFav();
    }

    // Fecha o toggleMobile antes de abrir ou fechar o menu
    if (document.body.classList.contains("openMobile")) {
        toggleMobile();
    }

    // Abre ou fecha o menu
    document.body.classList.toggle("open");
};

const toggleMobile = () => {
    // Fecha o menu antes de abrir a navbarUser
    if (document.body.classList.contains("open")) {
        toggleMenu();
    }
    // Abre ou fecha a navbarUser
    document.body.classList.toggle("openMobile");
};

const toggleFav = () => {
    // Fecha o menu antes de abrir a openFav
    if (document.body.classList.contains("open")) {
        toggleMenu();
    }

    // Abre ou fecha a openFav
    document.body.classList.toggle("openFav");

    // Exibe o conteúdo do carrinho-itens em favMobile se openFav estiver aberto
    const favMobile = document.getElementById("favMobile");
    const carrinhoItens = document.getElementById("carrinho-itens");

    if (document.body.classList.contains("openFav")) {
        favMobile.innerHTML = carrinhoItens.innerHTML;
    }
     else {
        // Limpa o conteúdo de favMobile quando openFav é fechado
        favMobile.innerHTML = "";
    }
};



function logout() {
    // Remove o nome do usuário do localStorage
    localStorage.removeItem('nomeUsuario');
    // Limpe outros dados de usuário, se houver
    window.location.href = "index.html";
}



let popupVisivel = false;

function mostrarOcultarPopup() {
    const popupElement = document.getElementById('popup');

    popupVisivel = !popupVisivel;
    popupElement.classList.toggle('show', popupVisivel);

    if (window.innerWidth <= 975) {
        popupElement.style.display = "none"
    }
}




//CARRINHO

document.addEventListener("DOMContentLoaded", function () {
    const carrinhoItens = JSON.parse(localStorage.getItem("carrinho")) || [];
    const itensLista = document.getElementById("itens-lista");
    const precoTotalSpan = document.getElementById("preco-total");
    const contFavoritosSpan = document.getElementById("cont-favoritos");
    const limparCarrinhoBtn = document.querySelector(".car");


    function toggleFavoritos() {
        const carrinhoItensDiv = document.getElementById("carrinho-itens");
        carrinhoItensDiv.style.display = carrinhoItensDiv.style.display === "none" ? "block" : "none";
    }


    document.getElementById("favoritos-link").addEventListener("click", function (event) {
        event.preventDefault();
        toggleFavoritos();
    });



    function limparCarrinho() {
        carrinhoItens.length = 0;
        atualizarCarrinho();
        salvarCarrinhoNoLocalStorage();
        resetProdutinhos();

    }

    function atualizarCarrinho() {
        itensLista.innerHTML = "";
        let total = 0;

        carrinhoItens.forEach(item => {
            const li = document.createElement("li");
            li.innerHTML = `
                <div class="item-carrinho">
                    <span>${item.nome}</span>
                    <br>
                    <button class="remove" onclick="removeCarrinho('${item.nome}')">-</button>
                    <span class="quantity">${item.quantidade}</span>
                    <button class="add" onclick="addMaisUm('${item.nome}')">+</button>
                    <span class="preco-total">R$${(item.preco * item.quantidade).toFixed(2)}</span>
                </div>
            `;
            itensLista.appendChild(li);
            total += item.preco * item.quantidade;
        });

        precoTotalSpan.textContent = `Valor Total: R$${total.toFixed(2)}`;
        contFavoritosSpan.textContent = carrinhoItens.reduce((acc, item) => acc + item.quantidade, 0).toString();
        limparCarrinhoBtn.style.display = "block";

           // Passo 1: Adicionar evento de clique aos botões "Adicionar ao Carrinho"
           const botoesAdicionarCarrinho = document.querySelectorAll(".add");
        botoesAdicionarCarrinho.forEach((botao) => {
            botao.addEventListener("click", function() {
                // Passo 2: Chamar a função para atualizar os itens do carrinho na versão mobile
                atualizarItensCarrinhoMobile();
            });
        });

        // Passo 3: Função para atualizar os itens do carrinho na versão mobile
        function atualizarItensCarrinhoMobile() {
            const carrinhoMobile = document.getElementById("carrinho-itens");
            const itensListaMobile = document.getElementById("itens-lista");

            // Obtenha os itens do carrinho do seu aplicativo
            const itensCarrinho = obterItensCarrinho();

            // Limpe os itens do carrinho na versão mobile
            itensListaMobile.innerHTML = "";

            // Percorra os itens do carrinho e crie os elementos correspondentes na versão mobile
            for (const item of itensCarrinho) {
                const itemElement = document.createElement("li");
                itemElement.textContent = item.nome;
                itensListaMobile.appendChild(itemElement);
            }

            // Exiba o carrinho na versão mobile, se necessário
            carrinhoMobile.style.display = "block";
        }

    }

    function addToCart(nome, preco) {
        const existingItem = carrinhoItens.find(item => item.nome === nome);

        if (existingItem) {
            existingItem.quantidade++;
        } else {
            carrinhoItens.push({ nome, preco, quantidade: 1 });
        }

        atualizarCarrinho();
        salvarCarrinhoNoLocalStorage();
        resetProdutinhos();
    }

    window.removeCarrinho = function (nome) {
        const index = carrinhoItens.findIndex(item => item.nome === nome);

        if (index !== -1) {
            const item = carrinhoItens[index];
            item.quantidade--;

            if (item.quantidade === 0) {
                const liToRemove = document.querySelector(`#li-${item.nome}`);
                if (liToRemove) {
                    liToRemove.remove();
                }

                carrinhoItens.splice(index, 1);
            }
        }

        atualizarCarrinho();
        salvarCarrinhoNoLocalStorage();
        resetProdutinhos();

    };

    window.addMaisUm = function (nome) {
        const item = carrinhoItens.find(item => item.nome === nome);

        if (item) {
            item.quantidade++;
        }

        atualizarCarrinho();
        salvarCarrinhoNoLocalStorage();
        resetProdutinhos();
    };

    function resetProdutinhos() {
        const produtinhosBtns = document.querySelectorAll(".produtinhos");
        produtinhosBtns.forEach(btn => {
            const coracaoVazio = btn.querySelector(".icon-coracao");
            const coracaoPintado = btn.querySelector(".icon-coracaoP");
            const valorInicialElement = btn.nextElementSibling; // assume que p.espec-coracao é irmão do botão
            const produtoNome = btn.getAttribute("data-produto-nome");
            const produtoNoCarrinho = carrinhoItens.find(item => item.nome === produtoNome);

            coracaoVazio.style.display = produtoNoCarrinho ? "none" : "block";
            coracaoPintado.style.display = produtoNoCarrinho ? "block" : "none";

            // Atualiza o valor inicial com base no estado do coração
            if (produtoNoCarrinho) {
                // Se o produto está no carrinho, verifica se já foi incrementado nesta atualização
                const valorAtual = parseInt(valorInicialElement.textContent);
                const valorInicial = parseInt(valorInicialElement.getAttribute("data-valor-inicial"));

                if (valorAtual === valorInicial) {
                    // Incrementa uma unidade apenas se ainda não foi incrementado
                    valorInicialElement.textContent = (valorAtual + 1).toString();
                }
            } else {
                // Se o produto não está no carrinho, restaura o valor inicial do HTML
                const valorInicial = parseInt(valorInicialElement.getAttribute("data-valor-inicial"));
                valorInicialElement.textContent = valorInicial.toString();
            }
        });

        // Atualiza a quantidade de itens no carrinho
        contFavoritosSpan.textContent = carrinhoItens.reduce((acc, item) => acc + item.quantidade, 0).toString();
    }






    const produtinhoBtns = document.querySelectorAll(".produtinhos");
    produtinhoBtns.forEach(produtinhoBtn => {
        produtinhoBtn.addEventListener("click", function () {
            const nome = this.getAttribute("data-produto-nome");
            const preco = parseFloat(this.getAttribute("data-preco"));
            const produtoNoCarrinho = carrinhoItens.find(item => item.nome === nome);

            if (!produtoNoCarrinho) {
                addToCart(nome, preco);
            } else {
                removeCarrinho(nome);
            }

            resetProdutinhos();
        });
    });

    const favoritosBtn = document.getElementById("favoritos");
    favoritosBtn.addEventListener("click", toggleFavoritos);

    limparCarrinhoBtn.addEventListener("click", function () {
        limparCarrinho();
    });

    function salvarCarrinhoNoLocalStorage() {
        localStorage.setItem("carrinho", JSON.stringify(carrinhoItens));
    }

    atualizarCarrinho();
    resetProdutinhos();



    
});






    </script>

    <script src="user.js"></script>
</body>

</html>